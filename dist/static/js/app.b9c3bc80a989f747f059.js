webpackJsonp([0],[function(n,i){},function(n,i){},function(n,i){},function(n,i){},function(n,i){},,function(n,i,t){"use strict";function a(){y.a.ajax({type:"get",url:"https://jirenguapi.applinzi.com/fm/getChannels.php",dataType:"json"}).then(function(n){c(n)},function(n){alert("获取专辑失败")})}function c(n){var i="";n.channels.forEach(function(n){i+="<li data-channel-id = "+n.channel_id+"> "+n.name+" </li>"}),I.html(i)}function s(n){var n=n||"public_yuzhong_huayu",i="https://jirenguapi.applinzi.com/fm/getSong.php?channel="+n;y.a.ajax({type:"get",url:i,dataType:"json"}).then(function(n){e(n),o()},function(n){alert("音乐播放失败")})}function e(n){D.artist=n.song[0].artist,D.lrc=n.song[0].lrc,D.picture=n.song[0].picture,D.sid=n.song[0].sid,D.title=n.song[0].title,D.url=n.song[0].url;D.atrist,D.lrc,D.picture,D.sid,D.title,D.url;y()("main>h2").text(D.title),y()("main>p").text(D.artist),y()("main .pic").html('<img src="'+D.picture+'">'),M.css({"background-image":"url("+D.picture+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center","box-shadow":"inset 0px 0px 20px #fff"}),b.src=D.url,b.play()}function o(){var n="https://jirenguapi.applinzi.com/fm/getLyric.php?&sid="+D.sid;y.a.ajax({type:"get",url:n,dataType:"json"}).then(function(n){l(n)},function(n){alert("歌词获取失败")})}function l(n){var i=[],t=n.lyric,a=t.split("\n"),c=/\[\d{2}:\d{2}\.\d{2}\]/g;a.forEach(function(n){if(!c.test(n))return void a.splice(n,1);var t=n.match(c),s=n.split(t),e=600*t[0][1]+60*t[0][2]+10*t[0][4]+1*t[0][5];i.push([e,s[1]])}),r(i)}function r(n){var i=0,t='<div class="lyric-ani" data-height="20">';n.forEach(function(n,a){var c=void 0===n[1]?"歌词错误^_^":n[1];t+='<p class="lyric-line" data-id="'+a+'"  data-time="'+n[0]+'" > '+c+" </p> \n",i++}),t+="</div>",M.html(t)}function d(){var n=b.currentTime/b.duration*q.width();E.width(n)}function p(){var n=parseInt(b.currentTime/60),i=parseInt(b.currentTime%60),t=parseInt(b.duration/60),a=parseInt(b.duration%60);i<10&&(i="0"+i),a<10&&(a="0"+a),isNaN(a)&&(a="00"),isNaN(t)&&(t="00"),N.text(n+":"+i+" / "+t+":"+a)}function u(){var n=b.volume;X.width(100*n+"%")}function f(){for(var n=y()(".lyric-ani"),i=n.find("p").height(),t=M.find(".lyric-ani p"),a=b.currentTime,c=(b.duration,0);c<t.length;c++){var s=t.eq(c).data("time"),e=t.eq(c+1).data("time");a>s&&a<e&&t.eq(c).addClass("active"),a>e&&(t.removeClass("active"),n.css({height:i*t.length+"px",marginTop:-parseInt(i*c-100)+"px",transition:"2s"}))}}Object.defineProperty(i,"__esModule",{value:!0});var h=t(5),y=t.n(h),m=t(0),g=(t.n(m),t(1)),v=(t.n(g),t(2)),k=(t.n(v),t(4)),x=(t.n(k),t(3)),b=(t.n(x),new Audio);b.autoPlay=!0,b.loop=!1;var j=y()(".album"),I=y()(".album-list"),w=y()(".control .icon-play"),C=y()(".control .icon-pause"),T=y()(".control .next"),_=y()(".control .pre"),z=y()(".disc"),N=y()(".timeline .time"),q=y()(".timeline .progress .bar"),E=y()(".timeline .progress-now"),P=y()(".adjust-volume .progress .bar"),X=y()(".adjust-volume .progress-now"),A=y()(".lrc .icon-lrc"),J=y()(".lrc .icon-dis"),L=y()("main .pic-ct"),M=y()("main .lrc-ct"),O=y()(".adjust-loop .icon-loop"),S=y()(".adjust-loop .icon-random"),B=!1,D={channelId:"",atrist:"",lrc:"",picture:"",sid:"",title:"",url:""};y()(function(){s()}),j.on("click",function(){a(),I.toggleClass("hidden")}),j.on("click","li",function(n){n.stopPropagation();var i=y()(this).data("channel-id");D.channelId=i,s(D.channelId),C.css("display","none"),w.css("display","flex"),z.addClass("active"),I.addClass("hidden")}),T.on("click",function(){s(D.channelId),C.css("display","none"),w.css("display","flex"),z.addClass("active")}),_.on("click",function(){s(D.channelId),C.css("display","none"),w.css("display","flex"),z.addClass("active")}),w.on("click",function(){b.pause(),w.css("display","none"),C.css("display","flex"),z.removeClass("active")}),C.on("click",function(){b.play(),C.css("display","none"),w.css("display","flex"),z.addClass("active")}),q.on("click",function(n){var i=n.offsetX/parseInt(y()(this).width());b.currentTime=i*b.duration,E.width(100*i+"%")}),b.ontimeupdate=function(){d(),p(),u(),f(),b.ended&&B&&(b.loop=!0,b.play()),b.ended&&!B&&(b.loop=!1,s(D.channelId))},P.on("click",function(n){var i=n.offsetX/parseInt(y()(this).width());b.volume=i,X.width(100*i+"%")}),A.on("click",function(){A.css("display","none"),J.css("display","inline-block"),L.css("display","none"),M.css("display","flex")}),J.on("click",function(){A.css("display","inline-block"),J.css("display","none"),L.css("display","flex"),M.css("display","none")}),O.on("click",function(){O.css("display","none"),S.css("display","inline-block"),B=!1}),S.on("click",function(){S.css("display","none"),O.css("display","inline-block"),B=!0})}],[6]);
//# sourceMappingURL=app.b9c3bc80a989f747f059.js.map