{"version":3,"sources":["webpack:///static/js/app.b9c3bc80a989f747f059.js","webpack:///./src/js/index.js"],"names":["webpackJsonp","module","exports","__webpack_exports__","__webpack_require__","getMusicAlbum","__WEBPACK_IMPORTED_MODULE_0_jquery___default","a","ajax","type","url","dataType","then","data","appendMusicAlbum","error","alert","albumString","channels","forEach","item","channel_id","name","$albumList","html","getMusicRandom","id","musicUrl","appendMusicInfo","getLrc","music","artist","song","lrc","picture","sid","title","atrist","text","$lrcCt","css","background-image","background-size","background-repeat","background-position","box-shadow","audioObject","src","play","lrcUrl","arrLic","lyricArr","lyric","lines","split","timeRegular","test","splice","time","match","seconds","push","appendLic","lyricLength","element","index","ele","undefined","setProgress","timeGo","currentTime","duration","progressBarNode","width","progressNowNode","setTimeNode","minute","parseInt","second","minuteTotal","secondTotal","isNaN","timeNode","setVoice","voice","volume","voiceNowNode","slideLrc","lyricAni","lyricH","find","height","lyricP","curTime","i","length","curT","eq","nexT","addClass","removeClass","marginTop","transition","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_jquery__","n","__WEBPACK_IMPORTED_MODULE_1_normalize_css__","__WEBPACK_IMPORTED_MODULE_2__css_common_css__","__WEBPACK_IMPORTED_MODULE_3__css_iconfont_css__","__WEBPACK_IMPORTED_MODULE_4__css_timeline_scss__","__WEBPACK_IMPORTED_MODULE_5__css_index_scss__","Audio","autoPlay","loop","$album","$play","$pause","$next","$pre","$disc","voiceBarNode","$lrc","$dis","$picCt","$loop","$random","isLoop","channelId","on","toggleClass","e","stopPropagation","this","pause","percent","offsetX","ontimeupdate","ended"],"mappings":"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","file":"static/js/app.b9c3bc80a989f747f059.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 5 */,\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_normalize_css__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_normalize_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_normalize_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__css_common_css__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__css_common_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__css_common_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_iconfont_css__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_iconfont_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__css_iconfont_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css_timeline_scss__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css_timeline_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__css_timeline_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__css_index_scss__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__css_index_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__css_index_scss__);\n\n\n\n\n\n\n\nvar audioObject = new Audio();\naudioObject.autoPlay = true;\naudioObject.loop = false;\n\nvar $album = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".album\");\nvar $albumList = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".album-list\");\nvar $play = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .icon-play\");\nvar $pause = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .icon-pause\");\nvar $next = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .next\");\nvar $pre = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .pre\");\nvar $disc = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".disc\");\n\nvar timeNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.timeline .time');\nvar progressBarNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.timeline .progress .bar');\n\nvar progressNowNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.timeline .progress-now');\n\nvar voiceBarNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.adjust-volume .progress .bar');\nvar voiceNowNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.adjust-volume .progress-now');\n\nvar $lrc = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".lrc .icon-lrc\");\nvar $dis = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".lrc .icon-dis\");\n\nvar $picCt = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main .pic-ct\");\nvar $lrcCt = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main .lrc-ct\");\n\nvar $loop = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".adjust-loop .icon-loop\");\nvar $random = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".adjust-loop .icon-random\");\nvar isLoop = false;\n\n\nvar music = {\n  channelId: \"\",\n  atrist: \"\",\n  lrc: \"\",\n  picture: \"\",\n  sid: \"\",\n  title: \"\",\n  url: \"\" };\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default()(function () {\n  getMusicRandom();\n});\n\n$album.on(\"click\", function () {\n  getMusicAlbum();\n  $albumList.toggleClass(\"hidden\");\n});\n\n$album.on(\"click\", \"li\", function (e) {\n  e.stopPropagation();\n  var id = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data(\"channel-id\");\n  music.channelId = id;\n\n  getMusicRandom(music.channelId);\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n  $albumList.addClass(\"hidden\");\n});\n\n$next.on(\"click\", function () {\n  getMusicRandom(music.channelId);\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n});\n\n$pre.on(\"click\", function () {\n  getMusicRandom(music.channelId);\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n});\n\n$play.on(\"click\", function () {\n  audioObject.pause();\n  $play.css(\"display\", \"none\");\n  $pause.css(\"display\", \"flex\");\n  $disc.removeClass(\"active\");\n});\n\n$pause.on(\"click\", function () {\n  audioObject.play();\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n});\n\nprogressBarNode.on(\"click\", function (e) {\n  var percent = e.offsetX / parseInt(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).width());\n  audioObject.currentTime = percent * audioObject.duration;\n  progressNowNode.width(percent * 100 + \"%\");\n});\n\naudioObject.ontimeupdate = function () {\n  setProgress();\n  setTimeNode();\n  setVoice();\n  slideLrc();\n  if (audioObject.ended && isLoop) {\n    audioObject.loop = true;\n    audioObject.play();\n  }\n  if (audioObject.ended && !isLoop) {\n    audioObject.loop = false;\n    getMusicRandom(music.channelId);\n  }\n};\n\nvoiceBarNode.on(\"click\", function (e) {\n  var percent = e.offsetX / parseInt(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).width());\n  audioObject.volume = percent;\n  voiceNowNode.width(percent * 100 + \"%\");\n});\n\n$lrc.on(\"click\", function () {\n  $lrc.css('display', 'none');\n  $dis.css('display', 'inline-block');\n  $picCt.css('display', 'none');\n  $lrcCt.css('display', 'flex');\n});\n\n$dis.on(\"click\", function () {\n  $lrc.css('display', 'inline-block');\n  $dis.css('display', 'none');\n  $picCt.css('display', 'flex');\n  $lrcCt.css('display', 'none');\n});\n\n$loop.on(\"click\", function () {\n  $loop.css(\"display\", \"none\");\n  $random.css(\"display\", \"inline-block\");\n  isLoop = false;\n});\n\n$random.on(\"click\", function () {\n  $random.css(\"display\", \"none\");\n  $loop.css(\"display\", \"inline-block\");\n  isLoop = true;\n});\n\nfunction getMusicAlbum() {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    type: 'get',\n    url: \"https://jirenguapi.applinzi.com/fm/getChannels.php\",\n    dataType: \"json\"\n  }).then(function (data) {\n    appendMusicAlbum(data);\n  }, function (error) {\n    alert('获取专辑失败');\n  });\n}\n\nfunction appendMusicAlbum(data) {\n  var albumString = \"\";\n\n  data.channels.forEach(function (item) {\n    albumString += '<li data-channel-id = ' + item.channel_id + '> ' + item.name + ' </li>';\n  });\n\n  $albumList.html(albumString);\n}\n\nfunction getMusicRandom(id) {\n  var id = id || 'public_yuzhong_huayu';\n  var musicUrl = \"https://jirenguapi.applinzi.com/fm/getSong.php?channel=\" + id;\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    type: 'get',\n    url: musicUrl,\n    dataType: \"json\"\n  }).then(function (data) {\n    appendMusicInfo(data);\n    getLrc();\n  }, function (error) {\n    alert('音乐播放失败');\n  });\n}\n\nfunction appendMusicInfo(data) {\n  music.artist = data.song[0].artist;\n  music.lrc = data.song[0].lrc;\n  music.picture = data.song[0].picture;\n  music.sid = data.song[0].sid;\n  music.title = data.song[0].title;\n  music.url = data.song[0].url;\n\n  var musicDetail = '<p> <h3>atrist</h3> ' + music.atrist + ' <p>\\n    <p> <h3>lrc</h3> ' + music.lrc + ' </p>\\n    <p> <h3>picture</h3> ' + music.picture + '</p>\\n    <p> <h3>sid</h3> ' + music.sid + ' </p>\\n    <p> <h3>title</h3> ' + music.title + ' </p>\\n    <p> <h3>url</h3> ' + music.url + ' </p>\\n    ';\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main>h2\").text(music.title);\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main>p\").text(music.artist);\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main .pic\").html('<img src=\"' + music.picture + '\">');\n  $lrcCt.css({\n    \"background-image\": 'url(' + music.picture + ')',\n    \"background-size\": 'cover',\n    \"background-repeat\": 'no-repeat',\n    \"background-position\": 'center',\n    \"box-shadow\": 'inset 0px 0px 20px #fff'\n  });\n  audioObject.src = music.url;\n  audioObject.play();\n}\n\nfunction getLrc() {\n  var lrcUrl = \"https://jirenguapi.applinzi.com/fm/getLyric.php?&sid=\" + music.sid;\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    type: 'get',\n    url: lrcUrl,\n    dataType: \"json\"\n  }).then(function (data) {\n    arrLic(data);\n  }, function (error) {\n    alert('歌词获取失败');\n  });\n}\n\nfunction arrLic(data) {\n  var lyricArr = [];\n  var lyric = data.lyric;\n\n  var lines = lyric.split(\"\\n\");\n\n  var timeRegular = /\\[\\d{2}:\\d{2}\\.\\d{2}\\]/g;\n  lines.forEach(function (item) {\n    if (!timeRegular.test(item)) {\n      lines.splice(item, 1);\n      return;\n    }\n    var time = item.match(timeRegular);\n\n    var lyric = item.split(time);\n\n    var seconds = time[0][1] * 600 + time[0][2] * 60 + time[0][4] * 10 + time[0][5] * 1;\n\n    lyricArr.push([seconds, lyric[1]]);\n  });\n  appendLic(lyricArr);\n}\n\nfunction appendLic(lyricArr) {\n  var lyricLength = 0;\n  var html = '<div class=\"lyric-ani\" data-height=\"20\">';\n  lyricArr.forEach(function (element, index) {\n    var ele = element[1] === undefined ? '歌词错误^_^' : element[1];\n    html += '<p class=\"lyric-line\" data-id=\"' + index + '\"  data-time=\"' + element[0] + '\" > ' + ele + ' </p> \\n';\n    lyricLength++;\n  });\n  html += '</div>';\n\n  $lrcCt.html(html);\n}\n\nfunction setProgress() {\n  var timeGo = audioObject.currentTime / audioObject.duration * progressBarNode.width();\n  progressNowNode.width(timeGo);\n}\n\nfunction setTimeNode() {\n  var minute = parseInt(audioObject.currentTime / 60);\n  var second = parseInt(audioObject.currentTime % 60);\n  var minuteTotal = parseInt(audioObject.duration / 60);\n  var secondTotal = parseInt(audioObject.duration % 60);\n\n  if (second < 10) {\n    second = \"0\" + second;\n  }\n\n  if (secondTotal < 10) {\n    secondTotal = \"0\" + secondTotal;\n  }\n\n  if (isNaN(secondTotal)) {\n    secondTotal = \"00\";\n  }\n\n  if (isNaN(minuteTotal)) {\n    minuteTotal = \"00\";\n  }\n\n  timeNode.text(minute + \":\" + second + \" / \" + minuteTotal + \":\" + secondTotal);\n}\n\nfunction setVoice() {\n  var voice = audioObject.volume;\n\n  voiceNowNode.width(voice * 100 + \"%\");\n}\n\nfunction slideLrc() {\n  var lyricAni = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".lyric-ani\");\n\n  var lyricH = lyricAni.find(\"p\").height();\n\n  var lyricP = $lrcCt.find('.lyric-ani p');\n\n  var curTime = audioObject.currentTime;\n  var content = audioObject.duration;\n\n  for (var i = 0; i < lyricP.length; i++) {\n    var curT = lyricP.eq(i).data(\"time\");\n    var nexT = lyricP.eq(i + 1).data(\"time\");\n    if (curTime > curT && curTime < nexT) {\n      lyricP.eq(i).addClass(\"active\");\n    }\n    if (curTime > nexT) {\n      lyricP.removeClass('active');\n      lyricAni.css({\n        'height': lyricH * lyricP.length + 'px',\n        'marginTop': -parseInt(lyricH * i - 100) + 'px',\n        \"transition\": \"2s\"\n      });\n    }\n  }\n}\n\n/***/ })\n],[6]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.b9c3bc80a989f747f059.js","import $ from 'jquery'\r\nimport 'normalize.css'\r\nimport '../css/common.css'\r\nimport '../css/iconfont.css'\r\nimport '../css/timeline.scss'\r\nimport '../css/index.scss'\r\n\r\nvar audioObject = new Audio()\r\naudioObject.autoPlay = true\r\naudioObject.loop = false\r\n\r\nvar $album = $(\".album\")\r\nvar $albumList = $(\".album-list\")\r\nvar $play = $(\".control .icon-play\")\r\nvar $pause = $(\".control .icon-pause\")\r\nvar $next = $(\".control .next\")\r\nvar $pre = $(\".control .pre\")\r\nvar $disc = $(\".disc\")\r\n\r\nvar timeNode = $('.timeline .time')\r\nvar progressBarNode = $('.timeline .progress .bar')\r\n\r\nvar progressNowNode = $('.timeline .progress-now')\r\n\r\nvar voiceBarNode = $('.adjust-volume .progress .bar')\r\nvar voiceNowNode = $('.adjust-volume .progress-now')\r\n\r\nvar $lrc = $(\".lrc .icon-lrc\")\r\nvar $dis = $(\".lrc .icon-dis\")\r\n\r\nvar $picCt = $(\"main .pic-ct\")\r\nvar $lrcCt = $(\"main .lrc-ct\")\r\n\r\nvar $loop = $(\".adjust-loop .icon-loop\")\r\nvar $random = $(\".adjust-loop .icon-random\")\r\nvar isLoop = false;\r\n// console.log($lrcCt);\r\n\r\nvar music = {\r\n  channelId: \"\", //专辑的ID\r\n  atrist: \"\", //演唱者\r\n  lrc: \"\", //歌词的下载地址\r\n  picture: \"\", //歌曲的图片\r\n  sid: \"\", //歌词的 ID\r\n  title: \"\", //歌曲的标题\r\n  url: \"\", //歌曲的地址\r\n}\r\n\r\n//页面加载完成即获取随机音乐\r\n$(function(){\r\n  getMusicRandom()\r\n})\r\n\r\n//点击获取专辑按钮\r\n$album.on(\"click\", function() {\r\n  getMusicAlbum()\r\n  $albumList.toggleClass(\"hidden\")\r\n})\r\n\r\n//给专辑的每个列表绑定点击获取随机音乐事件\r\n$album.on(\"click\", \"li\", function(e) {\r\n  e.stopPropagation();\r\n  var id = $(this).data(\"channel-id\")\r\n  music.channelId = id;\r\n  // console.log(id);\r\n  getMusicRandom(music.channelId) //根据 id 获取随机音乐\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n  $albumList.addClass(\"hidden\")\r\n})\r\n\r\n//点击获取下一首，本专辑内\r\n$next.on(\"click\", function() {\r\n  getMusicRandom(music.channelId)\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n})\r\n\r\n//点击获取上一首，本专辑内\r\n$pre.on(\"click\", function() {\r\n  getMusicRandom(music.channelId)\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n})\r\n\r\n//点击播放按钮，变成暂停状态\r\n$play.on(\"click\", function() {\r\n  audioObject.pause()\r\n  $play.css(\"display\", \"none\")\r\n  $pause.css(\"display\", \"flex\")\r\n  $disc.removeClass(\"active\")\r\n})\r\n\r\n//点击暂停按钮，变成播放状态\r\n$pause.on(\"click\", function() {\r\n  audioObject.play()\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n})\r\n\r\n//点击进度条，调整播放时间\r\nprogressBarNode.on(\"click\", function(e) {\r\n  // console.log(\"clicked\");\r\n  // console.log($(this).width());\r\n  var percent = e.offsetX / parseInt($(this).width())\r\n  audioObject.currentTime = percent * audioObject.duration\r\n  progressNowNode.width(percent * 100 + \"%\")\r\n})\r\n\r\n//播放时候触发函数\r\naudioObject.ontimeupdate = function() {\r\n  setProgress() //设置进度条\r\n  setTimeNode() //设置播放时间\r\n  setVoice() //设置当前音量\r\n  slideLrc() //滑动歌词\r\n  if(audioObject.ended && isLoop){\r\n    audioObject.loop = true;\r\n    audioObject.play()\r\n  }\r\n  if(audioObject.ended && !isLoop){\r\n    audioObject.loop = false\r\n    getMusicRandom(music.channelId)\r\n  }\r\n\r\n}\r\n\r\n//设置音量\r\nvoiceBarNode.on(\"click\", function(e) {\r\n  var percent = e.offsetX / parseInt($(this).width())\r\n  audioObject.volume = percent\r\n  voiceNowNode.width(percent * 100 + \"%\")\r\n})\r\n\r\n//点击显示歌词\r\n$lrc.on(\"click\", function() {\r\n  $lrc.css('display', 'none')\r\n  $dis.css('display', 'inline-block')\r\n  $picCt.css('display', 'none')\r\n  $lrcCt.css('display', 'flex')\r\n})\r\n\r\n//点击显示唱片\r\n$dis.on(\"click\", function() {\r\n  $lrc.css('display', 'inline-block')\r\n  $dis.css('display', 'none')\r\n  $picCt.css('display', 'flex')\r\n  $lrcCt.css('display', 'none')\r\n})\r\n\r\n//点击设置为随机播放\r\n$loop.on(\"click\", function(){\r\n  $loop.css(\"display\",\"none\")\r\n  $random.css(\"display\",\"inline-block\")\r\n  isLoop = false;\r\n})\r\n\r\n//点击设置为循环播放\r\n$random.on(\"click\", function(){\r\n  $random.css(\"display\",\"none\")\r\n  $loop.css(\"display\",\"inline-block\")\r\n    isLoop = true;\r\n})\r\n\r\n//获取音乐专辑\r\nfunction getMusicAlbum() {\r\n  $.ajax({\r\n    type: 'get',\r\n    url: \"https://jirenguapi.applinzi.com/fm/getChannels.php\",\r\n    dataType: \"json\",\r\n  }).then((data) => {\r\n    appendMusicAlbum(data);\r\n  }, (error) => {\r\n    alert('获取专辑失败');\r\n  })\r\n}\r\n\r\n//渲染音乐专辑\r\nfunction appendMusicAlbum(data) {\r\n  var albumString = \"\"\r\n  // console.log(data);\r\n  data.channels.forEach((item) => {\r\n    albumString += `<li data-channel-id = ${item.channel_id}> ${item.name} </li>`\r\n  })\r\n\r\n  $albumList.html(albumString);\r\n  //...............\r\n}\r\n\r\n//获取随机音乐\r\nfunction getMusicRandom(id) {\r\n  var id = id || 'public_yuzhong_huayu' //如果没有专辑id,默认为华语专辑\r\n  var musicUrl = \"https://jirenguapi.applinzi.com/fm/getSong.php?channel=\" + id\r\n  // console.log(musicUrl);\r\n  $.ajax({\r\n    type: 'get',\r\n    url: musicUrl,\r\n    dataType: \"json\",\r\n  }).then((data) => {\r\n    //console.log(data);\r\n    appendMusicInfo(data);\r\n    getLrc()\r\n  }, (error) => {\r\n    alert('音乐播放失败')\r\n  })\r\n}\r\n\r\n//渲染音乐信息\r\nfunction appendMusicInfo(data) {\r\n  //console.log(data.song[0]);\r\n  music.artist = data.song[0].artist\r\n  music.lrc = data.song[0].lrc\r\n  music.picture = data.song[0].picture\r\n  music.sid = data.song[0].sid\r\n  music.title = data.song[0].title\r\n  music.url = data.song[0].url\r\n  //console.log(music);\r\n  var musicDetail =\r\n    `<p> <h3>atrist</h3> ${music.atrist} <p>\r\n    <p> <h3>lrc</h3> ${music.lrc} </p>\r\n    <p> <h3>picture</h3> ${music.picture}</p>\r\n    <p> <h3>sid</h3> ${music.sid} </p>\r\n    <p> <h3>title</h3> ${music.title} </p>\r\n    <p> <h3>url</h3> ${music.url} </p>\r\n    `\r\n  // $musicInfo.html(musicDetail)\r\n  $(\"main>h2\").text(music.title)\r\n  $(\"main>p\").text(music.artist)\r\n  $(\"main .pic\").html(`<img src=\"${music.picture}\">`)\r\n  $lrcCt.css({\r\n    \"background-image\": `url(${music.picture})`,\r\n    \"background-size\": `cover`,\r\n    \"background-repeat\":`no-repeat`,\r\n    \"background-position\": `center`,\r\n    \"box-shadow\": `inset 0px 0px 20px #fff`\r\n  })\r\n  audioObject.src = music.url\r\n  audioObject.play()\r\n\r\n}\r\n\r\n//获取歌词\r\nfunction getLrc() {\r\n  var lrcUrl = \"https://jirenguapi.applinzi.com/fm/getLyric.php?&sid=\" + music.sid;\r\n  // console.log(lrcUrl);\r\n  $.ajax({\r\n    type: 'get',\r\n    url: lrcUrl,\r\n    dataType: \"json\",\r\n  }).then((data) => {\r\n    // console.log(data);\r\n    arrLic(data); //把歌词做成一个二维数组\r\n  }, (error) => {\r\n    alert('歌词获取失败')\r\n  })\r\n}\r\n\r\n//把歌词做成一个二维数组\r\nfunction arrLic(data) {\r\n  var lyricArr = [];\r\n  var lyric = data.lyric\r\n  // console.log(typeof lyric);\r\n  var lines = lyric.split(\"\\n\")\r\n  // console.log(lines);\r\n  var timeRegular = /\\[\\d{2}:\\d{2}\\.\\d{2}\\]/g\r\n  lines.forEach((item) => {\r\n    if (!timeRegular.test(item)) {\r\n      lines.splice(item, 1)\r\n      return;\r\n    }\r\n    var time = item.match(timeRegular)\r\n    // console.log(time[0]);\r\n    // console.log(typeof time[0]);\r\n    // console.log(time[0][1]);\r\n    var lyric = item.split(time)\r\n    // console.log(lyric);\r\n    var seconds = time[0][1] * 600 + time[0][2] * 60 + time[0][4] * 10 + time[0][5] * 1\r\n    // console.log(seconds);\r\n    lyricArr.push([seconds, lyric[1]])\r\n    // console.log(lyricArr);\r\n  })\r\n  appendLic(lyricArr) //渲染歌词\r\n}\r\n\r\nfunction appendLic(lyricArr) {\r\n  var lyricLength = 0;\r\n  var html = `<div class=\"lyric-ani\" data-height=\"20\">`;\r\n  lyricArr.forEach((element, index) => {\r\n    var ele = element[1] === undefined ? '歌词错误^_^' : element[1];\r\n    html += `<p class=\"lyric-line\" data-id=\"${index}\"  data-time=\"${element[0]}\" > ${ele} </p> \\n`\r\n    lyricLength++;\r\n  })\r\n  html += `</div>`\r\n  // console.log(html);\r\n  // console.log(lyricLength);\r\n  $lrcCt.html(html)\r\n  // onTimeUpdate(lyricLength);\r\n}\r\n\r\n// function onTimeUpdate(lyricLength){\r\n//   // console.log($lrcCt);\r\n//   var lyricAni = $(\".lyric-ani\")\r\n//   // console.log(lyricAni);\r\n//   var lyricH = lyricAni.data(\"height\")\r\n//   // console.log($lrcCt);\r\n//   var lyricP = $lrcCt.find('.lyric-ani p');\r\n//   // console.log(lyricP);\r\n//   var curTime = audioObject.currentTime;\r\n//   var content = audioObject.duration;\r\n// }\r\n\r\n\r\n\r\n//设置进度条\r\nfunction setProgress() {\r\n  var timeGo = (audioObject.currentTime / audioObject.duration) * progressBarNode.width()\r\n  progressNowNode.width(timeGo)\r\n}\r\n\r\n//设置剩余时间显示\r\nfunction setTimeNode() {\r\n  var minute = parseInt(audioObject.currentTime / 60)\r\n  var second = parseInt(audioObject.currentTime % 60)\r\n  var minuteTotal = parseInt(audioObject.duration / 60)\r\n  var secondTotal = parseInt(audioObject.duration % 60)\r\n\r\n  if (second < 10) {\r\n    second = \"0\" + second\r\n  }\r\n\r\n  if(secondTotal < 10){\r\n    secondTotal=\"0\"+secondTotal\r\n  }\r\n\r\n  if(isNaN(secondTotal)){\r\n    secondTotal = \"00\"\r\n  }\r\n\r\n  if(isNaN(minuteTotal)){\r\n    minuteTotal = \"00\"\r\n  }\r\n\r\n  // console.log(second);\r\n  timeNode.text(minute + \":\" + second +\" / \"+ minuteTotal+\":\"+secondTotal)\r\n}\r\n\r\n//设置音量条的长度\r\nfunction setVoice() {\r\n  var voice = audioObject.volume\r\n  // console.log(voice);\r\n  voiceNowNode.width(voice * 100 + \"%\")\r\n}\r\n\r\n//设置歌词滚动\r\nfunction slideLrc() {\r\n  //............根据时间滚动歌词\r\n  // console.log($lrcCt);\r\n  var lyricAni = $(\".lyric-ani\")\r\n  // console.log(lyricAni);\r\n  // var lyricH = lyricAni.data(\"height\")\r\n  var lyricH = lyricAni.find(\"p\").height()\r\n  // console.log(lyricH);\r\n  var lyricP = $lrcCt.find('.lyric-ani p');\r\n  // console.log(lyricP);\r\n  var curTime = audioObject.currentTime;\r\n  var content = audioObject.duration;\r\n  // console.log(lyricP.length);\r\n  for (var i = 0; i < lyricP.length; i++) {\r\n    var curT = lyricP.eq(i).data(\"time\")\r\n    var nexT = lyricP.eq(i + 1).data(\"time\")\r\n    if ((curTime > curT) && (curTime < nexT)) {\r\n      lyricP.eq(i).addClass(\"active\");\r\n    }\r\n    if (curTime > nexT) {\r\n      lyricP.removeClass('active');\r\n      lyricAni.css({\r\n        'height': lyricH * lyricP.length + 'px',\r\n        'marginTop': -parseInt(lyricH * i - 100) + 'px',\r\n        \"transition\": \"2s\"\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js"],"sourceRoot":""}