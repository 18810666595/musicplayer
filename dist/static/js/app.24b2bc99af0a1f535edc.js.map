{"version":3,"sources":["webpack:///static/js/app.24b2bc99af0a1f535edc.js","webpack:///./src/js/index.js"],"names":["webpackJsonp","module","exports","__webpack_exports__","__webpack_require__","getMusicAlbum","__WEBPACK_IMPORTED_MODULE_0_jquery___default","a","ajax","type","url","dataType","then","data","appendMusicAlbum","error","alert","albumString","channels","forEach","item","channel_id","name","$albumList","html","getMusicRandom","id","musicUrl","console","log","appendMusicInfo","getLrc","music","artist","song","lrc","picture","sid","title","atrist","text","audioObject","src","play","lrcUrl","arrLic","lyricArr","lyric","lines","split","timeRegular","test","splice","time","match","seconds","push","appendLic","lyricLength","element","index","ele","undefined","$lrcCt","setProgress","timeGo","currentTime","duration","progressBarNode","width","progressNowNode","setTimeNode","minute","parseInt","second","timeNode","setVoice","voice","volume","voiceNowNode","slideLrc","lyricAni","lyricH","lyricP","find","curTime","i","length","curT","eq","nexT","addClass","removeClass","css","height","marginTop","transition","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_jquery__","n","__WEBPACK_IMPORTED_MODULE_1_normalize_css__","__WEBPACK_IMPORTED_MODULE_2__css_common_css__","__WEBPACK_IMPORTED_MODULE_3__css_iconfont_css__","__WEBPACK_IMPORTED_MODULE_4__css_timeline_scss__","__WEBPACK_IMPORTED_MODULE_5__css_index_scss__","Audio","autoPlay","$album","$play","$pause","$next","$pre","$disc","voiceBarNode","$lrc","$dis","$picCt","channelId","on","toggleClass","e","stopPropagation","this","pause","percent","offsetX","ontimeupdate"],"mappings":"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","file":"static/js/app.24b2bc99af0a1f535edc.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 5 */,\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_normalize_css__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_normalize_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_normalize_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__css_common_css__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__css_common_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__css_common_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_iconfont_css__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_iconfont_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__css_iconfont_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css_timeline_scss__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css_timeline_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__css_timeline_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__css_index_scss__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__css_index_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__css_index_scss__);\n\n\n\n\n\n\n\nvar audioObject = new Audio();\naudioObject.autoPlay = true;\n\nvar $album = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".album\");\nvar $albumList = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".album-list\");\nvar $play = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .icon-play\");\nvar $pause = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .icon-pause\");\nvar $next = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .next\");\nvar $pre = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".control .pre\");\nvar $disc = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".disc\");\n\nvar timeNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.musicbox .time');\nvar progressBarNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.timeline .progress .bar');\nvar progressNowNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.timeline .progress-now');\n\nvar voiceBarNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.adjust-volume .progress .bar');\nvar voiceNowNode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.adjust-volume .progress-now');\n\nvar $lrc = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".lrc .icon-lrc\");\nvar $dis = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".lrc .icon-dis\");\n\nvar $picCt = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main .pic-ct\");\nvar $lrcCt = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main .lrc-ct\");\n\n\nvar music = {\n  channelId: \"\",\n  atrist: \"\",\n  lrc: \"\",\n  picture: \"\",\n  sid: \"\",\n  title: \"\",\n  url: \"\" };\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default()(function () {\n  getMusicRandom();\n});\n\n$album.on(\"click\", function () {\n  getMusicAlbum();\n  $albumList.toggleClass(\"hidden\");\n});\n\n$album.on(\"click\", \"li\", function (e) {\n  e.stopPropagation();\n  var id = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data(\"channel-id\");\n  music.channelId = id;\n\n  getMusicRandom(music.channelId);\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n  $albumList.addClass(\"hidden\");\n});\n\n$next.on(\"click\", function () {\n  getMusicRandom(music.channelId);\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n});\n\n$pre.on(\"click\", function () {\n  getMusicRandom(music.channelId);\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n});\n\n$play.on(\"click\", function () {\n  audioObject.pause();\n  $play.css(\"display\", \"none\");\n  $pause.css(\"display\", \"flex\");\n  $disc.removeClass(\"active\");\n});\n\n$pause.on(\"click\", function () {\n  audioObject.play();\n  $pause.css(\"display\", \"none\");\n  $play.css(\"display\", \"flex\");\n  $disc.addClass(\"active\");\n});\n\nprogressBarNode.on(\"click\", function (e) {\n  var percent = e.offsetX / parseInt(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).width());\n  audioObject.currentTime = percent * audioObject.duration;\n  progressNowNode.width(percent * 100 + \"%\");\n});\n\naudioObject.ontimeupdate = function () {\n  setProgress();\n  setTimeNode();\n  setVoice();\n  slideLrc();\n};\n\nvoiceBarNode.on(\"click\", function (e) {\n  var percent = e.offsetX / parseInt(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).width());\n  audioObject.volume = percent;\n  voiceNowNode.width(percent * 100 + \"%\");\n});\n\n$lrc.on(\"click\", function () {\n  $lrc.css('display', 'none');\n  $dis.css('display', 'inline-block');\n  $picCt.css('display', 'none');\n  $lrcCt.css('display', 'flex');\n});\n\n$dis.on(\"click\", function () {\n  $lrc.css('display', 'inline-block');\n  $dis.css('display', 'none');\n  $picCt.css('display', 'flex');\n  $lrcCt.css('display', 'none');\n});\n\nfunction getMusicAlbum() {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    type: 'get',\n    url: \"https://jirenguapi.applinzi.com/fm/getChannels.php\",\n    dataType: \"json\"\n  }).then(function (data) {\n    appendMusicAlbum(data);\n  }, function (error) {\n    alert('获取专辑失败');\n  });\n}\n\nfunction appendMusicAlbum(data) {\n  var albumString = \"\";\n\n  data.channels.forEach(function (item) {\n    albumString += '<li data-channel-id = ' + item.channel_id + '> ' + item.name + ' </li>';\n  });\n\n  $albumList.html(albumString);\n}\n\nfunction getMusicRandom(id) {\n  var id = id || 'public_yuzhong_huayu';\n  var musicUrl = \"https://jirenguapi.applinzi.com/fm/getSong.php?channel=\" + id;\n  console.log(musicUrl);\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    type: 'get',\n    url: musicUrl,\n    dataType: \"json\"\n  }).then(function (data) {\n    appendMusicInfo(data);\n    getLrc();\n  }, function (error) {\n    alert('音乐播放失败');\n  });\n}\n\nfunction appendMusicInfo(data) {\n  music.artist = data.song[0].artist;\n  music.lrc = data.song[0].lrc;\n  music.picture = data.song[0].picture;\n  music.sid = data.song[0].sid;\n  music.title = data.song[0].title;\n  music.url = data.song[0].url;\n\n  var musicDetail = '<p> <h3>atrist</h3> ' + music.atrist + ' <p>\\n    <p> <h3>lrc</h3> ' + music.lrc + ' </p>\\n    <p> <h3>picture</h3> ' + music.picture + '</p>\\n    <p> <h3>sid</h3> ' + music.sid + ' </p>\\n    <p> <h3>title</h3> ' + music.title + ' </p>\\n    <p> <h3>url</h3> ' + music.url + ' </p>\\n    ';\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main>h2\").text(music.title);\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main>p\").text(music.artist);\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"main .pic\").html('<img src=\"' + music.picture + '\">');\n  audioObject.src = music.url;\n  audioObject.play();\n}\n\nfunction getLrc() {\n  var lrcUrl = \"https://jirenguapi.applinzi.com/fm/getLyric.php?&sid=\" + music.sid;\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    type: 'get',\n    url: lrcUrl,\n    dataType: \"json\"\n  }).then(function (data) {\n    arrLic(data);\n  }, function (error) {\n    alert('歌词获取失败');\n  });\n}\n\nfunction arrLic(data) {\n  var lyricArr = [];\n  var lyric = data.lyric;\n\n  var lines = lyric.split(\"\\n\");\n\n  var timeRegular = /\\[\\d{2}:\\d{2}\\.\\d{2}\\]/g;\n  lines.forEach(function (item) {\n    if (!timeRegular.test(item)) {\n      lines.splice(item, 1);\n      return;\n    }\n    var time = item.match(timeRegular);\n\n    var lyric = item.split(time);\n\n    var seconds = time[0][1] * 600 + time[0][2] * 60 + time[0][4] * 10 + time[0][5] * 1;\n\n    lyricArr.push([seconds, lyric[1]]);\n  });\n  appendLic(lyricArr);\n}\n\nfunction appendLic(lyricArr) {\n  var lyricLength = 0;\n  var html = '<div class=\"lyric-ani\" data-height=\"20\">';\n  lyricArr.forEach(function (element, index) {\n    var ele = element[1] === undefined ? '歌词错误' : element[1];\n    html += '<p class=\"lyric-line\" data-id=\"' + index + '\"  data-time=\"' + element[0] + '\" > ' + ele + ' </p> \\n';\n    lyricLength++;\n  });\n  html += '</div>';\n\n  $lrcCt.html(html);\n}\n\nfunction setProgress() {\n  var timeGo = audioObject.currentTime / audioObject.duration * progressBarNode.width();\n  progressNowNode.width(timeGo);\n}\n\nfunction setTimeNode() {\n  var minute = parseInt(audioObject.currentTime / 60);\n  var second = parseInt(audioObject.currentTime % 60);\n  if (second < 10) {\n    second = \"0\" + second;\n  }\n\n  timeNode.text(minute + \":\" + second);\n}\n\nfunction setVoice() {\n  var voice = audioObject.volume;\n\n  voiceNowNode.width(voice * 100 + \"%\");\n}\n\nfunction slideLrc() {\n  var lyricAni = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\".lyric-ani\");\n\n  var lyricH = lyricAni.data(\"height\");\n\n  var lyricP = $lrcCt.find('.lyric-ani p');\n\n  var curTime = audioObject.currentTime;\n  var content = audioObject.duration;\n\n  for (var i = 0; i < lyricP.length; i++) {\n    var curT = lyricP.eq(i).data(\"time\");\n    var nexT = lyricP.eq(i + 1).data(\"time\");\n    if (curTime > curT && curTime < nexT) {\n      lyricP.eq(i).addClass(\"active\");\n    }\n    if (curTime > nexT) {\n      lyricP.removeClass('active');\n      lyricAni.css({\n        'height': lyricH * lyricP.length + 'px',\n        'marginTop': -parseInt(lyricH * i - 100) + 'px',\n        \"transition\": \"2s\"\n      });\n    }\n  }\n}\n\n/***/ })\n],[6]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.24b2bc99af0a1f535edc.js","import $ from 'jquery'\r\nimport 'normalize.css'\r\nimport '../css/common.css'\r\nimport '../css/iconfont.css'\r\nimport '../css/timeline.scss'\r\nimport '../css/index.scss'\r\n\r\nvar audioObject = new Audio()\r\naudioObject.autoPlay = true\r\n\r\nvar $album = $(\".album\")\r\nvar $albumList = $(\".album-list\")\r\nvar $play = $(\".control .icon-play\")\r\nvar $pause = $(\".control .icon-pause\")\r\nvar $next = $(\".control .next\")\r\nvar $pre = $(\".control .pre\")\r\nvar $disc = $(\".disc\")\r\n\r\nvar timeNode = $('.musicbox .time')\r\nvar progressBarNode = $('.timeline .progress .bar')\r\nvar progressNowNode = $('.timeline .progress-now')\r\n\r\nvar voiceBarNode = $('.adjust-volume .progress .bar')\r\nvar voiceNowNode = $('.adjust-volume .progress-now')\r\n\r\nvar $lrc = $(\".lrc .icon-lrc\")\r\nvar $dis = $(\".lrc .icon-dis\")\r\n\r\nvar $picCt = $(\"main .pic-ct\")\r\nvar $lrcCt = $(\"main .lrc-ct\")\r\n// console.log($lrcCt);\r\n\r\nvar music = {\r\n  channelId: \"\", //专辑的ID\r\n  atrist: \"\", //演唱者\r\n  lrc: \"\", //歌词的下载地址\r\n  picture: \"\", //歌曲的图片\r\n  sid: \"\", //歌词的 ID\r\n  title: \"\", //歌曲的标题\r\n  url: \"\", //歌曲的地址\r\n}\r\n\r\n//页面加载完成即获取随机音乐\r\n$(function(){\r\n  getMusicRandom()\r\n})\r\n\r\n//点击获取专辑按钮\r\n$album.on(\"click\", function() {\r\n  getMusicAlbum()\r\n  $albumList.toggleClass(\"hidden\")\r\n})\r\n\r\n//给专辑的每个列表绑定点击获取随机音乐事件\r\n$album.on(\"click\", \"li\", function(e) {\r\n  e.stopPropagation();\r\n  var id = $(this).data(\"channel-id\")\r\n  music.channelId = id;\r\n  // console.log(id);\r\n  getMusicRandom(music.channelId) //根据 id 获取随机音乐\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n  $albumList.addClass(\"hidden\")\r\n})\r\n\r\n//点击获取下一首，本专辑内\r\n$next.on(\"click\", function() {\r\n  getMusicRandom(music.channelId)\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n})\r\n\r\n//点击获取上一首，本专辑内\r\n$pre.on(\"click\", function() {\r\n  getMusicRandom(music.channelId)\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n})\r\n\r\n//点击播放按钮，变成暂停状态\r\n$play.on(\"click\", function() {\r\n  audioObject.pause()\r\n  $play.css(\"display\", \"none\")\r\n  $pause.css(\"display\", \"flex\")\r\n  $disc.removeClass(\"active\")\r\n})\r\n\r\n//点击暂停按钮，变成播放状态\r\n$pause.on(\"click\", function() {\r\n  audioObject.play()\r\n  $pause.css(\"display\", \"none\")\r\n  $play.css(\"display\", \"flex\")\r\n  $disc.addClass(\"active\")\r\n})\r\n\r\n//点击进度条，调整播放时间\r\nprogressBarNode.on(\"click\", function(e) {\r\n  // console.log($(this).width());\r\n  var percent = e.offsetX / parseInt($(this).width())\r\n  audioObject.currentTime = percent * audioObject.duration\r\n  progressNowNode.width(percent * 100 + \"%\")\r\n})\r\n\r\n//播放时候触发函数\r\naudioObject.ontimeupdate = function() {\r\n  setProgress() //设置进度条\r\n  setTimeNode() //设置播放时间\r\n  setVoice() //设置当前音量\r\n  slideLrc() //滑动歌词\r\n}\r\n\r\n//设置音量\r\nvoiceBarNode.on(\"click\", function(e) {\r\n  var percent = e.offsetX / parseInt($(this).width())\r\n  audioObject.volume = percent\r\n  voiceNowNode.width(percent * 100 + \"%\")\r\n})\r\n\r\n//点击显示歌词\r\n$lrc.on(\"click\", function() {\r\n  $lrc.css('display', 'none')\r\n  $dis.css('display', 'inline-block')\r\n  $picCt.css('display', 'none')\r\n  $lrcCt.css('display', 'flex')\r\n})\r\n\r\n//点击显示唱片\r\n$dis.on(\"click\", function() {\r\n  $lrc.css('display', 'inline-block')\r\n  $dis.css('display', 'none')\r\n  $picCt.css('display', 'flex')\r\n  $lrcCt.css('display', 'none')\r\n})\r\n\r\n//获取音乐专辑\r\nfunction getMusicAlbum() {\r\n  $.ajax({\r\n    type: 'get',\r\n    url: \"https://jirenguapi.applinzi.com/fm/getChannels.php\",\r\n    dataType: \"json\",\r\n  }).then((data) => {\r\n    appendMusicAlbum(data);\r\n  }, (error) => {\r\n    alert('获取专辑失败');\r\n  })\r\n}\r\n\r\n//渲染音乐专辑\r\nfunction appendMusicAlbum(data) {\r\n  var albumString = \"\"\r\n  // console.log(data);\r\n  data.channels.forEach((item) => {\r\n    albumString += `<li data-channel-id = ${item.channel_id}> ${item.name} </li>`\r\n  })\r\n\r\n  $albumList.html(albumString);\r\n  //...............\r\n}\r\n\r\n//获取随机音乐\r\nfunction getMusicRandom(id) {\r\n  var id = id || 'public_yuzhong_huayu' //如果没有专辑id,默认为华语专辑\r\n  var musicUrl = \"https://jirenguapi.applinzi.com/fm/getSong.php?channel=\" + id\r\n  console.log(musicUrl);\r\n  $.ajax({\r\n    type: 'get',\r\n    url: musicUrl,\r\n    dataType: \"json\",\r\n  }).then((data) => {\r\n    //console.log(data);\r\n    appendMusicInfo(data);\r\n    getLrc()\r\n  }, (error) => {\r\n    alert('音乐播放失败')\r\n  })\r\n}\r\n\r\n//渲染音乐信息\r\nfunction appendMusicInfo(data) {\r\n  //console.log(data.song[0]);\r\n  music.artist = data.song[0].artist\r\n  music.lrc = data.song[0].lrc\r\n  music.picture = data.song[0].picture\r\n  music.sid = data.song[0].sid\r\n  music.title = data.song[0].title\r\n  music.url = data.song[0].url\r\n  //console.log(music);\r\n  var musicDetail =\r\n    `<p> <h3>atrist</h3> ${music.atrist} <p>\r\n    <p> <h3>lrc</h3> ${music.lrc} </p>\r\n    <p> <h3>picture</h3> ${music.picture}</p>\r\n    <p> <h3>sid</h3> ${music.sid} </p>\r\n    <p> <h3>title</h3> ${music.title} </p>\r\n    <p> <h3>url</h3> ${music.url} </p>\r\n    `\r\n  // $musicInfo.html(musicDetail)\r\n  $(\"main>h2\").text(music.title)\r\n  $(\"main>p\").text(music.artist)\r\n  $(\"main .pic\").html(`<img src=\"${music.picture}\">`)\r\n  audioObject.src = music.url\r\n  audioObject.play()\r\n\r\n}\r\n\r\n//获取歌词\r\nfunction getLrc() {\r\n  var lrcUrl = \"https://jirenguapi.applinzi.com/fm/getLyric.php?&sid=\" + music.sid;\r\n  // console.log(lrcUrl);\r\n  $.ajax({\r\n    type: 'get',\r\n    url: lrcUrl,\r\n    dataType: \"json\",\r\n  }).then((data) => {\r\n    // console.log(data);\r\n    arrLic(data); //把歌词做成一个二维数组\r\n  }, (error) => {\r\n    alert('歌词获取失败')\r\n  })\r\n}\r\n\r\n//把歌词做成一个二维数组\r\nfunction arrLic(data) {\r\n  var lyricArr = [];\r\n  var lyric = data.lyric\r\n  // console.log(typeof lyric);\r\n  var lines = lyric.split(\"\\n\")\r\n  // console.log(lines);\r\n  var timeRegular = /\\[\\d{2}:\\d{2}\\.\\d{2}\\]/g\r\n  lines.forEach((item) => {\r\n    if (!timeRegular.test(item)) {\r\n      lines.splice(item, 1)\r\n      return;\r\n    }\r\n    var time = item.match(timeRegular)\r\n    // console.log(time[0]);\r\n    // console.log(typeof time[0]);\r\n    // console.log(time[0][1]);\r\n    var lyric = item.split(time)\r\n    // console.log(lyric);\r\n    var seconds = time[0][1] * 600 + time[0][2] * 60 + time[0][4] * 10 + time[0][5] * 1\r\n    // console.log(seconds);\r\n    lyricArr.push([seconds, lyric[1]])\r\n    // console.log(lyricArr);\r\n  })\r\n  appendLic(lyricArr) //渲染歌词\r\n}\r\n\r\nfunction appendLic(lyricArr) {\r\n  var lyricLength = 0;\r\n  var html = `<div class=\"lyric-ani\" data-height=\"20\">`;\r\n  lyricArr.forEach((element, index) => {\r\n    var ele = element[1] === undefined ? '歌词错误' : element[1];\r\n    html += `<p class=\"lyric-line\" data-id=\"${index}\"  data-time=\"${element[0]}\" > ${ele} </p> \\n`\r\n    lyricLength++;\r\n  })\r\n  html += `</div>`\r\n  // console.log(html);\r\n  // console.log(lyricLength);\r\n  $lrcCt.html(html)\r\n  // onTimeUpdate(lyricLength);\r\n}\r\n\r\n// function onTimeUpdate(lyricLength){\r\n//   // console.log($lrcCt);\r\n//   var lyricAni = $(\".lyric-ani\")\r\n//   // console.log(lyricAni);\r\n//   var lyricH = lyricAni.data(\"height\")\r\n//   // console.log($lrcCt);\r\n//   var lyricP = $lrcCt.find('.lyric-ani p');\r\n//   // console.log(lyricP);\r\n//   var curTime = audioObject.currentTime;\r\n//   var content = audioObject.duration;\r\n// }\r\n\r\n\r\n\r\n//设置进度条\r\nfunction setProgress() {\r\n  var timeGo = (audioObject.currentTime / audioObject.duration) * progressBarNode.width()\r\n  progressNowNode.width(timeGo)\r\n}\r\n\r\n//设置剩余时间显示\r\nfunction setTimeNode() {\r\n  var minute = parseInt(audioObject.currentTime / 60)\r\n  var second = parseInt(audioObject.currentTime % 60)\r\n  if (second < 10) {\r\n    second = \"0\" + second\r\n  }\r\n  // console.log(second);\r\n  timeNode.text(minute + \":\" + second)\r\n}\r\n\r\n//设置音量条的长度\r\nfunction setVoice() {\r\n  var voice = audioObject.volume\r\n  // console.log(voice);\r\n  voiceNowNode.width(voice * 100 + \"%\")\r\n}\r\n\r\n//设置歌词滚动\r\nfunction slideLrc() {\r\n  //............根据时间滚动歌词\r\n  // console.log($lrcCt);\r\n  var lyricAni = $(\".lyric-ani\")\r\n  // console.log(lyricAni);\r\n  var lyricH = lyricAni.data(\"height\")\r\n  // console.log($lrcCt);\r\n  var lyricP = $lrcCt.find('.lyric-ani p');\r\n  // console.log(lyricP);\r\n  var curTime = audioObject.currentTime;\r\n  var content = audioObject.duration;\r\n  // console.log(lyricP.length);\r\n  for (var i = 0; i < lyricP.length; i++) {\r\n    var curT = lyricP.eq(i).data(\"time\")\r\n    var nexT = lyricP.eq(i + 1).data(\"time\")\r\n    if ((curTime > curT) && (curTime < nexT)) {\r\n      lyricP.eq(i).addClass(\"active\");\r\n    }\r\n    if (curTime > nexT) {\r\n      lyricP.removeClass('active');\r\n      lyricAni.css({\r\n        'height': lyricH * lyricP.length + 'px',\r\n        'marginTop': -parseInt(lyricH * i - 100) + 'px',\r\n        \"transition\": \"2s\"\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js"],"sourceRoot":""}